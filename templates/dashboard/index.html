{% extends 'base.html' %}
{% load bootstrap4 %}
{% load static %}
{% block titulo %}Dashboard{% endblock %}

{% block conteudo %}
<p class="lead"> Dashboard </p>
<div class="row">
          <div class="col-12 col-sm-6 col-md-3">
            <div class="info-box">
              <span class="info-box-icon bg-info elevation-1"><i class="fas fa-user"></i></span>

              <div class="info-box-content">
                <span class="info-box-text">Desligamentos</span>
                <span class="info-box-number">
                  5 Colaboradores
                </span>
              </div>
              <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
          </div>
          <!-- /.col -->
          <div class="col-12 col-sm-6 col-md-3">
            <div class="info-box mb-3">
              <span class="info-box-icon bg-success elevation-1"><i class="fas fa-envelope"></i></span>

              <div class="info-box-content">
                <span class="info-box-text">Tickets </span>
                <span class="info-box-number">50</span>
              </div>
              <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
          </div>
          <!-- /.col -->

          <!-- fix for small devices only -->
          <div class="clearfix hidden-md-up"></div>

          <div class="col-12 col-sm-6 col-md-3">
            <div class="info-box mb-3">
              <span class="info-box-icon bg-danger elevation-1"><i class="fas fa-heartbeat"></i></span>

              <div class="info-box-content">
                <span class="info-box-text">Risco de Saúde Colab</span>
                <span class="info-box-number">6</span>
              </div>
              <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
          </div>
          <!-- /.col -->
          <div class="col-12 col-sm-6 col-md-3">
            <div class="info-box mb-3">
              <span class="info-box-icon bg-warning elevation-1"><i class="fas fa-graduation-cap"></i></span>

              <div class="info-box-content">
                <span class="info-box-text">Treinamentos Agendados</span>
                <span class="info-box-number">11</span>
              </div>
              <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
          </div>
          <!-- /.col -->
        </div>
<!-- Segunda parte dos comunicados -->
<div class="row">
<div class="col-md-6">
<div class="card card-danger">
    <div class="card-header">
      <h3 class="card-title">Desempenho por Peça produzidas</h3>

      <div class="card-tools">
        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
        </button>
        <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
      </div>
    </div>
    <div class="card-body" style="display: block;">
      <div class="container">
        <canvas id="change_employee" width="450" height="250"></canvas>
      </div>

    </div>
  </div>
</div> <!-- col-md-6  [ card danger ]-->

<div class="col-md-6">
  <div class="card card-primary">
    <div class="card-header">
      <h3 class="card-title">Gerenciamento de Horas Extras</h3>

      <div class="card-tools">
        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
        </button>
        <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
      </div>
    </div>
    <div class="card-body" style="display: block;">
      <div class="container">
        <canvas id="generate_hour" width="450" height="250"></canvas>
      </div>

    </div>
  </div>
</div> <!-- col-md-6  [ card danger ]-->

</div> <!-- ./row -->

<div class="card card-primary">
  <div class="card-header">
    <h3 class="card-title">Ultimos 10 Tickets {{ page_title }}</h3>
  </div>
  <!-- /.card-header -->
  <div class="card-body">
    <div id="example2_wrapper" class="dataTables_wrapper dt-bootstrap4">
      
      <div class="row">
        <div class="col-sm-12">
          <div class="box-body table-responsive no-padding">
            <table class="table table-striped table-responsive border rounded bg-light shadow">
              <thead class="thead-dark">
                <tr>
                  <th scope="col" style="width: 12%; text-align : center;">Data</th>
                  <th scope="col" style="width: 1%; text-align : center;">RE</th>
                  <th scope="col" style="width: 18%; text-align : center;">Nome</th>
                  <th scope="col" style="width: 12%; text-align : center;">Categoria</th>
                  <th scope="col" style="width: 15%; text-align : center;">Subcategoria</th>
                  <th scope="col" style="width: 2%; text-align : center;">Dias</th>
                  <th scope="col" style="width: 5%; text-align : center;">Finalizado</th>
                </tr>
              </thead>
              <tbody>   
                <tr>
                  {% for ticket in obj %}
                  <td style="text-align : center;">{{ ticket.date|date:"d/m/Y  H:i" }}</td>
                  <td scope="row" style="text-align : center;">{{ ticket.employee.identifier }}</th>
                  <td style="text-align : center;"><h6><a href="{% url 'ticket:finish_ticket' ticket.id %}"> {{ ticket.employee.name }}</a></h6></td>
                  <td style="text-align : center;">{{ ticket.category }}</td>
                  <td style="text-align : center;">{{ ticket.subcategory }}</td>
                  {% if ticket.finish is False %}
                  <td id="ticket-open">{{ ticket.open_time }} </td>
                  {% else %}
                  <td id="ticket-close">{{ ticket.finish_time }}</td>
                  {% endif %}
                  {% if ticket.finish is True %}
                  <td style="text-align : center;"><img src="{% static 'icons\tick.png' %}"></td>
                  {% else %}
                  <td style="text-align : center;"><img src="{% static 'icons\cancel.png' %}"></td>
                  {% endif %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
            <tfoot>
            {% include 'parciais/_pagination.html'%}
                </tfoot>
  </div>
  
  </div>
</div>
<div class="row">

  <div class="col-md-2">
    <div class="pl-1">Mostrar 1 de 10</div>
  </div>

    <div class="col-md-4 offset-md-4">
      <div class="dataTables_paginate paging_simple_numbers" id="example2_paginate">
        <ul class="pagination">
          <li class="paginate_button page-item previous disabled" id="example2_previous">
            <a href="#" aria-controls="example2" data-dt-idx="0" tabindex="0" class="page-link">Previous</a>
          </li>
          <li class="paginate_button page-item active">
            <a href="#" aria-controls="example2" data-dt-idx="1" tabindex="0" class="page-link">1</a>
          </li>
          <li class="paginate_button page-item ">
            <a href="#" aria-controls="example2" data-dt-idx="2" tabindex="0" class="page-link">2</a>
          </li>
          <li class="paginate_button page-item ">
            <a href="#" aria-controls="example2" data-dt-idx="3" tabindex="0" class="page-link">3</a>
          </li>
          <li class="paginate_button page-item ">
            <a href="#" aria-controls="example2" data-dt-idx="4" tabindex="0" class="page-link">4</a>
          </li>
          <li class="paginate_button page-item ">
            <a href="#" aria-controls="example2" data-dt-idx="5" tabindex="0" class="page-link">5</a>
          </li>
          <li class="paginate_button page-item ">
            <a href="#" aria-controls="example2" data-dt-idx="6" tabindex="0" class="page-link">6</a>
          </li>
          <li class="paginate_button page-item next" id="example2_next">
            <a href="#" aria-controls="example2" data-dt-idx="7" tabindex="0" class="page-link">Next</a>
          </li>
        </ul>
      </div>
    </div>
  
  </div>

</div>

  </div>
  <!-- /.card-body -->
</div>

{% endblock %}